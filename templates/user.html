<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Oyente</title>
    <link rel="stylesheet" type="text/css" href="../static/styles.css">
</head>
<body>
    <h1>CANCIONES A LA CARTA</h1>
    <h2>por JUANITO PÉ</h2>
    <table class="styled-table">
<thead>
    <tr>
        <th>#</th>
        <th>Canción</th>
        <th>Autor</th>
        <th>
            <form method="GET" action="{{ url_for('user', page_num=1) }}">
                <select name="genero" onchange="this.form.submit()">
                    <option value="">Todos</option>
                    {% for genero in generos %}
                        <option value="{{ genero.id }}" {% if request.args.get('genero') == genero.id|string %}selected{% endif %}>
                            {{ genero.name }}
                        </option>
                    {% endfor %}
                </select>
            </form>
        </th>
        <th>Acción</th>
    </tr>
</thead>

        <tbody>
            {% for song in songs.items %}
                <tr>
                    <td>{{ song.id }}</td>
                    <td>{{ song.name }}</td>
                    <td>{{ song.author }}</td>
                    <td>{{ song.genero.name }}</td>
                    <td>
                        {% if song.selected %}
                            <form method="POST" action="{{ url_for('deselect_song', song_id=song.id) }}" style="display:inline;">
                            <button type="submit">Quitar</button>
                            </form>
                        {% else %}
                            <form method="POST" action="{{ url_for('select_song', song_id=song.id) }}" style="display:inline;">
                                <button type="submit">Seleccionar</button>
                            </form>
                        {% endif %}
                    </td>
                </tr>
            {% endfor %}
        </tbody>
    </table>
    {% for page in songs.iter_pages() %}
      {% if page %}
        {% if page != songs.page %}
          <a href="{{ url_for('user', page_num=page) }}">{{ page }}</a>
        {% else %}
          <strong>{{ page }}</strong>
        {% endif %}
      {% else %}
        <span class=ellipsis>…</span>
      {% endif %}
    {% endfor %}
    <a href="{{ url_for('admin_panel.index') }}">CONFIGURACION</a>

</body>
</html>